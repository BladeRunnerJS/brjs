"use strict";

/**
* @module br/services/bundlepath/BRBundlePathService
*/

var br = require('br/Core');
var BundlePathService = require('br/services/BundlePathService');

/**
* Provides access to the bundle path which is automatically generated by BladeRunnerJS
* @class
* @alias module:br/services/bundlepath/BRBundlePathService
* @implements module:br/services/BundlePathService
*/
function BRBundlePathService() {
};

BRBundlePathService.prototype.getBundlePath = function(bundlePath)	{
	return getBundlePath(window.$BRJS_BUNDLE_PATH, bundlePath);
}

BRBundlePathService.prototype.getUnversionedBundlePath = function(bundlePath) {
	return getBundlePath(window.$BRJS_UNVERSIONED_BUNDLE_PATH, bundlePath);
};

function getBundlePath(prefix, bundlePath) {
	if (bundlePath != undefined) {
		/* make sure there are no leading /s that might mess up the generated path */
		bundlePath = bundlePath.replace(/^\/|\/$/g, '');
		prefix = prefix.replace(/^\/|\/$/g, '');
		return prefix + "/" + bundlePath
	}
	return prefix;
}

br.implement(BRBundlePathService, BundlePathService);

module.exports = BRBundlePathService;
